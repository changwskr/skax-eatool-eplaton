# Backend Database Guide

## ğŸ—„ï¸ **SKAX EA Tool Eplaton Database Implementation Rules**

### **ğŸ—ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì•„í‚¤í…ì²˜ ê°œìš”**

```
ğŸ“¦ Database Layer Structure
â”œâ”€â”€ ğŸ¯ Repository Layer
â”‚   â”œâ”€â”€ Data Access Interface
â”‚   â”œâ”€â”€ Type-Safe Queries
â”‚   â”œâ”€â”€ Transaction Management
â”‚   â””â”€â”€ Error Handling
â”œâ”€â”€ ğŸ”§ Mapper Layer (MyBatis)
â”‚   â”œâ”€â”€ SQL Mapping
â”‚   â”œâ”€â”€ Result Mapping
â”‚   â””â”€â”€ Dynamic Queries
â”œâ”€â”€ ğŸ’¾ Entity/DTO Layer
â”‚   â”œâ”€â”€ Type-Safe Models
â”‚   â”œâ”€â”€ Data Validation
â”‚   â””â”€â”€ Mapping Rules
â””â”€â”€ ğŸ­ Database Configuration
    â”œâ”€â”€ Connection Pool
    â”œâ”€â”€ Transaction Manager
    â””â”€â”€ MyBatis Configuration
```

### **ğŸ¯ MUST FOLLOW - ë°ì´í„°ë² ì´ìŠ¤ êµ¬í˜„ ê·œì¹™**

#### **1. Repository í´ë˜ìŠ¤ êµ¬ì¡°**

**âœ… ì˜¬ë°”ë¥¸ Repository ì¸í„°í˜ì´ìŠ¤**
```java
/**
 * {ë„ë©”ì¸} Repository ì¸í„°í˜ì´ìŠ¤
 * 
 * í”„ë¡œê·¸ë¨ëª…: {ë„ë©”ì¸}Repository.java
 * ì„¤ëª…: {ë„ë©”ì¸} ë°ì´í„° ì ‘ê·¼ì„ ìœ„í•œ Repository ì¸í„°í˜ì´ìŠ¤
 * ì‘ì„±ì¼: 2024-01-01
 * ì‘ì„±ì: SKAX Project Team
 * 
 * ì£¼ìš” ê¸°ëŠ¥:
 * - {ë„ë©”ì¸} CRUD ì‘ì—…
 * - íƒ€ì… ì•ˆì „í•œ ì¿¼ë¦¬ ë©”ì„œë“œ
 * - í˜ì´ì§• ë° ì •ë ¬ ì§€ì›
 * 
 * @version 1.0
 */
public interface {ë„ë©”ì¸}Repository {
    
    /**
     * {ë„ë©”ì¸} ì¡°íšŒ
     * 
     * @param {ë„ë©”ì¸}DDTO ì¡°íšŒ ì¡°ê±´
     * @return {ë„ë©”ì¸} ì •ë³´
     * @throws NewBusinessException ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸
     */
    {ë„ë©”ì¸} get{ë„ë©”ì¸}({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO) throws NewBusinessException;
    
    /**
     * {ë„ë©”ì¸} ëª©ë¡ ì¡°íšŒ
     * 
     * @param {ë„ë©”ì¸}DDTO ì¡°íšŒ ì¡°ê±´
     * @return {ë„ë©”ì¸} ëª©ë¡
     * @throws NewBusinessException ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸
     */
    List<{ë„ë©”ì¸}> getList{ë„ë©”ì¸}({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO) throws NewBusinessException;
    
    /**
     * {ë„ë©”ì¸} ìƒì„±
     * 
     * @param {ë„ë©”ì¸}DDTO {ë„ë©”ì¸} ì •ë³´
     * @return ìƒì„±ëœ í–‰ ìˆ˜
     * @throws NewBusinessException ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸
     */
    int create{ë„ë©”ì¸}({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO) throws NewBusinessException;
    
    /**
     * {ë„ë©”ì¸} ìˆ˜ì •
     * 
     * @param {ë„ë©”ì¸}DDTO {ë„ë©”ì¸} ì •ë³´
     * @return ìˆ˜ì •ëœ í–‰ ìˆ˜
     * @throws NewBusinessException ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸
     */
    int update{ë„ë©”ì¸}({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO) throws NewBusinessException;
    
    /**
     * {ë„ë©”ì¸} ì‚­ì œ
     * 
     * @param {ë„ë©”ì¸}DDTO {ë„ë©”ì¸} ì •ë³´
     * @return ì‚­ì œëœ í–‰ ìˆ˜
     * @throws NewBusinessException ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸
     */
    int delete{ë„ë©”ì¸}({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO) throws NewBusinessException;
    
    /**
     * {ë„ë©”ì¸} ì¡´ì¬ ì—¬ë¶€ í™•ì¸
     * 
     * @param {ë„ë©”ì¸}DDTO ì¡°íšŒ ì¡°ê±´
     * @return ì¡´ì¬ ì—¬ë¶€
     * @throws NewBusinessException ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸
     */
    boolean exists{ë„ë©”ì¸}({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO) throws NewBusinessException;
    
    /**
     * {ë„ë©”ì¸} ê°œìˆ˜ ì¡°íšŒ
     * 
     * @param {ë„ë©”ì¸}DDTO ì¡°íšŒ ì¡°ê±´
     * @return ê°œìˆ˜
     * @throws NewBusinessException ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸
     */
    int count{ë„ë©”ì¸}({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO) throws NewBusinessException;
}
```

#### **2. Repository êµ¬í˜„ì²´**

**âœ… ì˜¬ë°”ë¥¸ Repository êµ¬í˜„ì²´**
```java
/**
 * {ë„ë©”ì¸} MyBatis Repository êµ¬í˜„ì²´
 * 
 * í”„ë¡œê·¸ë¨ëª…: {ë„ë©”ì¸}MyBatisRepository.java
 * ì„¤ëª…: MyBatisë¥¼ ì‚¬ìš©í•œ {ë„ë©”ì¸} Repository êµ¬í˜„
 * ì‘ì„±ì¼: 2024-01-01
 * ì‘ì„±ì: SKAX Project Team
 * 
 * ì£¼ìš” ê¸°ëŠ¥:
 * - {ë„ë©”ì¸} CRUD ì‘ì—…
 * - íƒ€ì… ì•ˆì „í•œ ë°ì´í„° ì ‘ê·¼
 * - ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹…
 * 
 * @version 1.0
 */
@Repository
@Profile("mybatis")
public class {ë„ë©”ì¸}MyBatisRepository implements {ë„ë©”ì¸}Repository {
    
    private NewIKesaLogger logger = NewKesaLogHelper.getBiz();
    private static final Logger slf4jLogger = LoggerFactory.getLogger({ë„ë©”ì¸}MyBatisRepository.class);
    
    @Autowired
    private {ë„ë©”ì¸}Mapper {ë„ë©”ì¸}Mapper;
    
    @Override
    public List<{ë„ë©”ì¸}> getList{ë„ë©”ì¸}({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO) throws NewBusinessException {
        logger.info("{ë„ë©”ì¸}MyBatisRepository", "=== {ë„ë©”ì¸}MyBatisRepository.getList{ë„ë©”ì¸} START ===");
        slf4jLogger.info("=== {ë„ë©”ì¸}MyBatisRepository.getList{ë„ë©”ì¸} START (SLF4J) ===");
        
        try {
            // íƒ€ì… ì•ˆì „ì„± ê²€ì¦
            validate{ë„ë©”ì¸}DDTO({ë„ë©”ì¸}DDTO);
            
            // Mapper í˜¸ì¶œ
            List<{ë„ë©”ì¸}> {ë„ë©”ì¸}List = {ë„ë©”ì¸}Mapper.findBySearchCondition({ë„ë©”ì¸}DDTO);
            
            // ê²°ê³¼ ê²€ì¦
            validateResult({ë„ë©”ì¸}List);
            
            logger.info("{ë„ë©”ì¸}MyBatisRepository", "=== {ë„ë©”ì¸}MyBatisRepository.getList{ë„ë©”ì¸} END ===");
            slf4jLogger.info("=== {ë„ë©”ì¸}MyBatisRepository.getList{ë„ë©”ì¸} END (SLF4J) ===");
            
            return {ë„ë©”ì¸}List;
            
        } catch (Exception e) {
            logger.error("Error in getList{ë„ë©”ì¸}: " + e.getMessage(), String.valueOf(e));
            slf4jLogger.error("Error in getList{ë„ë©”ì¸}: " + e.getMessage(), e);
            throw new NewBusinessException("B0000001", "getList{ë„ë©”ì¸}", e);
        }
    }
    
    @Override
    public int create{ë„ë©”ì¸}({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO) throws NewBusinessException {
        logger.info("{ë„ë©”ì¸}MyBatisRepository", "=== {ë„ë©”ì¸}MyBatisRepository.create{ë„ë©”ì¸} START ===");
        
        try {
            // íƒ€ì… ì•ˆì „ì„± ê²€ì¦
            validateCreate{ë„ë©”ì¸}DDTO({ë„ë©”ì¸}DDTO);
            
            // Mapper í˜¸ì¶œ
            int result = {ë„ë©”ì¸}Mapper.insert{ë„ë©”ì¸}({ë„ë©”ì¸}DDTO);
            
            // ê²°ê³¼ ê²€ì¦
            validateCreateResult(result);
            
            logger.info("{ë„ë©”ì¸}MyBatisRepository", "=== {ë„ë©”ì¸}MyBatisRepository.create{ë„ë©”ì¸} END ===");
            return result;
            
        } catch (Exception e) {
            logger.error("Error in create{ë„ë©”ì¸}: " + e.getMessage(), String.valueOf(e));
            throw new NewBusinessException("B0000002", "create{ë„ë©”ì¸}", e);
        }
    }
    
    /**
     * DTO íƒ€ì… ì•ˆì „ì„± ê²€ì¦
     */
    private void validate{ë„ë©”ì¸}DDTO({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO) throws NewBusinessException {
        if ({ë„ë©”ì¸}DDTO == null) {
            throw new NewBusinessException("DTOëŠ” nullì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
        
        // í•„ìˆ˜ í•„ë“œ ê²€ì¦
        if (StringUtils.isEmpty({ë„ë©”ì¸}DDTO.get{ë„ë©”ì¸}Id())) {
            throw new NewBusinessException("{ë„ë©”ì¸} IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
    }
    
    /**
     * ìƒì„± ê²°ê³¼ ê²€ì¦
     */
    private void validateCreateResult(int result) throws NewBusinessException {
        if (result <= 0) {
            throw new NewBusinessException("{ë„ë©”ì¸} ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        }
    }
}
```

#### **3. íƒ€ì… ì•ˆì „í•œ Entity/DTO êµ¬ì¡°**

**âœ… ì˜¬ë°”ë¥¸ Entity í´ë˜ìŠ¤**
```java
/**
 * {ë„ë©”ì¸} ì—”í‹°í‹° í´ë˜ìŠ¤
 * 
 * í”„ë¡œê·¸ë¨ëª…: {ë„ë©”ì¸}Entity.java
 * ì„¤ëª…: {ë„ë©”ì¸} ë°ì´í„°ë² ì´ìŠ¤ ì—”í‹°í‹°
 * ì‘ì„±ì¼: 2024-01-01
 * ì‘ì„±ì: SKAX Project Team
 * 
 * ì£¼ìš” ê¸°ëŠ¥:
 * - íƒ€ì… ì•ˆì „í•œ ë°ì´í„° ëª¨ë¸
 * - ë°ì´í„°ë² ì´ìŠ¤ ë§¤í•‘
 * - ê²€ì¦ ê·œì¹™ ì ìš©
 * 
 * @version 1.0
 */
@Entity
@Table(name = "{ë„ë©”ì¸_ì†Œë¬¸ì}s")
public class {ë„ë©”ì¸}Entity extends BaseEntity {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "{ë„ë©”ì¸_ì†Œë¬¸ì}_id")
    private Long {ë„ë©”ì¸}Id;
    
    @Column(name = "{ë„ë©”ì¸_ì†Œë¬¸ì}_name", nullable = false, length = 100)
    @NotBlank(message = "{ë„ë©”ì¸}ëª…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.")
    private String {ë„ë©”ì¸}Name;
    
    @Column(name = "status", nullable = false, length = 20)
    @Enumerated(EnumType.STRING)
    private {ë„ë©”ì¸}Status status = {ë„ë©”ì¸}Status.ACTIVE;
    
    @Column(name = "created_date", nullable = false, updatable = false)
    @CreationTimestamp
    private LocalDateTime createdDate;
    
    @Column(name = "modified_date", nullable = false)
    @UpdateTimestamp
    private LocalDateTime modifiedDate;
    
    // ê¸°ë³¸ ìƒì„±ì
    public {ë„ë©”ì¸}Entity() {}
    
    // ìƒì„±ì
    public {ë„ë©”ì¸}Entity(String {ë„ë©”ì¸}Name) {
        this.{ë„ë©”ì¸}Name = {ë„ë©”ì¸}Name;
        this.status = {ë„ë©”ì¸}Status.ACTIVE;
    }
    
    // Getterì™€ Setter
    public Long get{ë„ë©”ì¸}Id() {
        return {ë„ë©”ì¸}Id;
    }
    
    public void set{ë„ë©”ì¸}Id(Long {ë„ë©”ì¸}Id) {
        this.{ë„ë©”ì¸}Id = {ë„ë©”ì¸}Id;
    }
    
    public String get{ë„ë©”ì¸}Name() {
        return {ë„ë©”ì¸}Name;
    }
    
    public void set{ë„ë©”ì¸}Name(String {ë„ë©”ì¸}Name) {
        this.{ë„ë©”ì¸}Name = {ë„ë©”ì¸}Name;
    }
    
    public {ë„ë©”ì¸}Status getStatus() {
        return status;
    }
    
    public void setStatus({ë„ë©”ì¸}Status status) {
        this.status = status;
    }
    
    /**
     * {ë„ë©”ì¸} ìƒíƒœ ì—´ê±°í˜•
     */
    public enum {ë„ë©”ì¸}Status {
        ACTIVE, INACTIVE, SUSPENDED, DELETED
    }
    
    /**
     * íƒ€ì… ì•ˆì „í•œ ìƒíƒœ ë³€ê²½
     */
    public void activate() {
        this.status = {ë„ë©”ì¸}Status.ACTIVE;
    }
    
    public void deactivate() {
        this.status = {ë„ë©”ì¸}Status.INACTIVE;
    }
    
    public void suspend() {
        this.status = {ë„ë©”ì¸}Status.SUSPENDED;
    }
    
    public void delete() {
        this.status = {ë„ë©”ì¸}Status.DELETED;
    }
    
    /**
     * íƒ€ì… ì•ˆì „í•œ ìƒíƒœ í™•ì¸
     */
    public boolean isActive() {
        return {ë„ë©”ì¸}Status.ACTIVE.equals(this.status);
    }
    
    public boolean isInactive() {
        return {ë„ë©”ì¸}Status.INACTIVE.equals(this.status);
    }
    
    public boolean isSuspended() {
        return {ë„ë©”ì¸}Status.SUSPENDED.equals(this.status);
    }
    
    public boolean isDeleted() {
        return {ë„ë©”ì¸}Status.DELETED.equals(this.status);
    }
}
```

#### **4. íƒ€ì… ì•ˆì „í•œ DTO í´ë˜ìŠ¤**

**âœ… ì˜¬ë°”ë¥¸ DTO í´ë˜ìŠ¤**
```java
/**
 * {ë„ë©”ì¸} DTO í´ë˜ìŠ¤
 * 
 * í”„ë¡œê·¸ë¨ëª…: {ë„ë©”ì¸}DDTO.java
 * ì„¤ëª…: {ë„ë©”ì¸} ë°ì´í„° ì „ì†¡ ê°ì²´
 * ì‘ì„±ì¼: 2024-01-01
 * ì‘ì„±ì: SKAX Project Team
 * 
 * ì£¼ìš” ê¸°ëŠ¥:
 * - íƒ€ì… ì•ˆì „í•œ ë°ì´í„° ì „ì†¡
 * - ê²€ì¦ ê·œì¹™ ì ìš©
 * - Entityì™€ì˜ ë§¤í•‘
 * 
 * @version 1.0
 */
public class {ë„ë©”ì¸}DDTO extends NewAbstractDTO {
    
    // íƒ€ì… ì•ˆì „í•œ í•„ë“œ ì •ì˜
    private String {ë„ë©”ì¸}Id;
    private String {ë„ë©”ì¸}Name;
    private String status;
    private String createdDate;
    private String modifiedDate;
    
    // ê²€ì¦ ê·œì¹™
    @NotBlank(message = "{ë„ë©”ì¸} IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.")
    private String validation{ë„ë©”ì¸}Id;
    
    @NotBlank(message = "{ë„ë©”ì¸}ëª…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.")
    @Size(min = 1, max = 100, message = "{ë„ë©”ì¸}ëª…ì€ 1-100ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤.")
    private String validation{ë„ë©”ì¸}Name;
    
    // ê¸°ë³¸ ìƒì„±ì
    public {ë„ë©”ì¸}DDTO() {}
    
    // ìƒì„±ì
    public {ë„ë©”ì¸}DDTO(String {ë„ë©”ì¸}Id, String {ë„ë©”ì¸}Name) {
        this.{ë„ë©”ì¸}Id = {ë„ë©”ì¸}Id;
        this.{ë„ë©”ì¸}Name = {ë„ë©”ì¸}Name;
        this.status = "ACTIVE";
    }
    
    // Getterì™€ Setter
    public String get{ë„ë©”ì¸}Id() {
        return {ë„ë©”ì¸}Id;
    }
    
    public void set{ë„ë©”ì¸}Id(String {ë„ë©”ì¸}Id) {
        this.{ë„ë©”ì¸}Id = {ë„ë©”ì¸}Id;
        this.validation{ë„ë©”ì¸}Id = {ë„ë©”ì¸}Id; // ê²€ì¦ìš© í•„ë“œ ë™ê¸°í™”
    }
    
    public String get{ë„ë©”ì¸}Name() {
        return {ë„ë©”ì¸}Name;
    }
    
    public void set{ë„ë©”ì¸}Name(String {ë„ë©”ì¸}Name) {
        this.{ë„ë©”ì¸}Name = {ë„ë©”ì¸}Name;
        this.validation{ë„ë©”ì¸}Name = {ë„ë©”ì¸}Name; // ê²€ì¦ìš© í•„ë“œ ë™ê¸°í™”
    }
    
    public String getStatus() {
        return status;
    }
    
    public void setStatus(String status) {
        this.status = status;
    }
    
    public String getCreatedDate() {
        return createdDate;
    }
    
    public void setCreatedDate(String createdDate) {
        this.createdDate = createdDate;
    }
    
    public String getModifiedDate() {
        return modifiedDate;
    }
    
    public void setModifiedDate(String modifiedDate) {
        this.modifiedDate = modifiedDate;
    }
    
    /**
     * íƒ€ì… ì•ˆì „í•œ ìƒíƒœ ì„¤ì •
     */
    public void setActiveStatus() {
        this.status = "ACTIVE";
    }
    
    public void setInactiveStatus() {
        this.status = "INACTIVE";
    }
    
    public void setSuspendedStatus() {
        this.status = "SUSPENDED";
    }
    
    public void setDeletedStatus() {
        this.status = "DELETED";
    }
    
    /**
     * íƒ€ì… ì•ˆì „í•œ ìƒíƒœ í™•ì¸
     */
    public boolean isActive() {
        return "ACTIVE".equals(this.status);
    }
    
    public boolean isInactive() {
        return "INACTIVE".equals(this.status);
    }
    
    public boolean isSuspended() {
        return "SUSPENDED".equals(this.status);
    }
    
    public boolean isDeleted() {
        return "DELETED".equals(this.status);
    }
    
    /**
     * íƒ€ì… ì•ˆì „í•œ ê²€ì¦
     */
    public void validate() throws NewBusinessException {
        if (StringUtils.isEmpty({ë„ë©”ì¸}Id)) {
            throw new NewBusinessException("{ë„ë©”ì¸} IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        
        if (StringUtils.isEmpty({ë„ë©”ì¸}Name)) {
            throw new NewBusinessException("{ë„ë©”ì¸}ëª…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        
        if ({ë„ë©”ì¸}Name.length() > 100) {
            throw new NewBusinessException("{ë„ë©”ì¸}ëª…ì€ 100ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
    }
}
```

#### **5. MyBatis Mapper ì¸í„°í˜ì´ìŠ¤**

**âœ… ì˜¬ë°”ë¥¸ Mapper ì¸í„°í˜ì´ìŠ¤**
```java
/**
 * {ë„ë©”ì¸} MyBatis Mapper ì¸í„°í˜ì´ìŠ¤
 * 
 * í”„ë¡œê·¸ë¨ëª…: {ë„ë©”ì¸}Mapper.java
 * ì„¤ëª…: {ë„ë©”ì¸} ë°ì´í„°ë² ì´ìŠ¤ ë§¤í•‘ì„ ìœ„í•œ MyBatis Mapper
 * ì‘ì„±ì¼: 2024-01-01
 * ì‘ì„±ì: SKAX Project Team
 * 
 * ì£¼ìš” ê¸°ëŠ¥:
 * - íƒ€ì… ì•ˆì „í•œ SQL ë§¤í•‘
 * - ë™ì  ì¿¼ë¦¬ ì§€ì›
 * - ê²°ê³¼ ë§¤í•‘
 * 
 * @version 1.0
 */
@Mapper
public interface {ë„ë©”ì¸}Mapper {
    
    /**
     * ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ {ë„ë©”ì¸} ëª©ë¡ ì¡°íšŒ
     * 
     * @param {ë„ë©”ì¸}DDTO ì¡°íšŒ ì¡°ê±´
     * @return {ë„ë©”ì¸} ëª©ë¡
     */
    List<{ë„ë©”ì¸}> findBySearchCondition({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO);
    
    /**
     * {ë„ë©”ì¸} IDë¡œ ì¡°íšŒ
     * 
     * @param {ë„ë©”ì¸}Id {ë„ë©”ì¸} ID
     * @return {ë„ë©”ì¸} ì •ë³´
     */
    {ë„ë©”ì¸} findBy{ë„ë©”ì¸}Id(String {ë„ë©”ì¸}Id);
    
    /**
     * {ë„ë©”ì¸} ìƒì„±
     * 
     * @param {ë„ë©”ì¸}DDTO {ë„ë©”ì¸} ì •ë³´
     * @return ìƒì„±ëœ í–‰ ìˆ˜
     */
    int insert{ë„ë©”ì¸}({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO);
    
    /**
     * {ë„ë©”ì¸} ìˆ˜ì •
     * 
     * @param {ë„ë©”ì¸}DDTO {ë„ë©”ì¸} ì •ë³´
     * @return ìˆ˜ì •ëœ í–‰ ìˆ˜
     */
    int update{ë„ë©”ì¸}({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO);
    
    /**
     * {ë„ë©”ì¸} ì‚­ì œ
     * 
     * @param {ë„ë©”ì¸}DDTO {ë„ë©”ì¸} ì •ë³´
     * @return ì‚­ì œëœ í–‰ ìˆ˜
     */
    int delete{ë„ë©”ì¸}({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO);
    
    /**
     * {ë„ë©”ì¸} ì¡´ì¬ ì—¬ë¶€ í™•ì¸
     * 
     * @param {ë„ë©”ì¸}Id {ë„ë©”ì¸} ID
     * @return ì¡´ì¬ ì—¬ë¶€
     */
    boolean existsBy{ë„ë©”ì¸}Id(String {ë„ë©”ì¸}Id);
    
    /**
     * {ë„ë©”ì¸} ê°œìˆ˜ ì¡°íšŒ
     * 
     * @param {ë„ë©”ì¸}DDTO ì¡°íšŒ ì¡°ê±´
     * @return ê°œìˆ˜
     */
    int countBySearchCondition({ë„ë©”ì¸}DDTO {ë„ë©”ì¸}DDTO);
}
```

#### **6. MyBatis XML Mapper**

**âœ… ì˜¬ë°”ë¥¸ XML Mapper**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.skax.eatool.mbc.dc.{ë„ë©”ì¸_ì†Œë¬¸ì}dc.mapper.{ë„ë©”ì¸}Mapper">

    <!-- ê²°ê³¼ ë§µ ì •ì˜ -->
    <resultMap id="{ë„ë©”ì¸}ResultMap" type="com.skax.eatool.mbc.dc.{ë„ë©”ì¸_ì†Œë¬¸ì}dc.dto.{ë„ë©”ì¸}Dto">
        <id column="{ë„ë©”ì¸_ëŒ€ë¬¸ì}_ID" property="{ë„ë©”ì¸}Id" jdbcType="VARCHAR"/>
        <result column="{ë„ë©”ì¸_ëŒ€ë¬¸ì}_NAME" property="{ë„ë©”ì¸}Name" jdbcType="VARCHAR"/>
        <result column="STATUS" property="status" jdbcType="VARCHAR"/>
        <result column="CREATED_DATE" property="createdDate" jdbcType="TIMESTAMP"/>
        <result column="MODIFIED_DATE" property="modifiedDate" jdbcType="TIMESTAMP"/>
    </resultMap>

    <!-- {ë„ë©”ì¸} ëª©ë¡ ì¡°íšŒ -->
    <select id="findBySearchCondition" resultMap="{ë„ë©”ì¸}ResultMap" 
            parameterType="com.skax.eatool.mbc.dc.{ë„ë©”ì¸_ì†Œë¬¸ì}dc.dto.{ë„ë©”ì¸}DDTO">
        SELECT 
            {ë„ë©”ì¸_ëŒ€ë¬¸ì}_ID,
            {ë„ë©”ì¸_ëŒ€ë¬¸ì}_NAME,
            STATUS,
            CREATED_DATE,
            MODIFIED_DATE
        FROM {ë„ë©”ì¸_ëŒ€ë¬¸ì}_INFO
        <where>
            <if test="{ë„ë©”ì¸}Id != null and {ë„ë©”ì¸}Id != ''">
                AND {ë„ë©”ì¸_ëŒ€ë¬¸ì}_ID = #{({ë„ë©”ì¸}Id)}
            </if>
            <if test="{ë„ë©”ì¸}Name != null and {ë„ë©”ì¸}Name != ''">
                AND {ë„ë©”ì¸_ëŒ€ë¬¸ì}_NAME LIKE CONCAT('%', #{({ë„ë©”ì¸}Name)}, '%')
            </if>
            <if test="status != null and status != ''">
                AND STATUS = #{status}
            </if>
        </where>
        ORDER BY CREATED_DATE DESC
        <if test="pageSize != null and pageSize > 0">
            LIMIT #{pageSize} OFFSET #{offset}
        </if>
    </select>

    <!-- {ë„ë©”ì¸} IDë¡œ ì¡°íšŒ -->
    <select id="findBy{ë„ë©”ì¸}Id" resultMap="{ë„ë©”ì¸}ResultMap" parameterType="string">
        SELECT 
            {ë„ë©”ì¸_ëŒ€ë¬¸ì}_ID,
            {ë„ë©”ì¸_ëŒ€ë¬¸ì}_NAME,
            STATUS,
            CREATED_DATE,
            MODIFIED_DATE
        FROM {ë„ë©”ì¸_ëŒ€ë¬¸ì}_INFO
        WHERE {ë„ë©”ì¸_ëŒ€ë¬¸ì}_ID = #{({ë„ë©”ì¸}Id)}
    </select>

    <!-- {ë„ë©”ì¸} ìƒì„± -->
    <insert id="insert{ë„ë©”ì¸}" parameterType="com.skax.eatool.mbc.dc.{ë„ë©”ì¸_ì†Œë¬¸ì}dc.dto.{ë„ë©”ì¸}DDTO">
        INSERT INTO {ë„ë©”ì¸_ëŒ€ë¬¸ì}_INFO (
            {ë„ë©”ì¸_ëŒ€ë¬¸ì}_ID,
            {ë„ë©”ì¸_ëŒ€ë¬¸ì}_NAME,
            STATUS,
            CREATED_DATE,
            MODIFIED_DATE
        ) VALUES (
            #{({ë„ë©”ì¸}Id)},
            #{({ë„ë©”ì¸}Name)},
            #{status},
            NOW(),
            NOW()
        )
    </insert>

    <!-- {ë„ë©”ì¸} ìˆ˜ì • -->
    <update id="update{ë„ë©”ì¸}" parameterType="com.skax.eatool.mbc.dc.{ë„ë©”ì¸_ì†Œë¬¸ì}dc.dto.{ë„ë©”ì¸}DDTO">
        UPDATE {ë„ë©”ì¸_ëŒ€ë¬¸ì}_INFO
        SET 
            {ë„ë©”ì¸_ëŒ€ë¬¸ì}_NAME = #{({ë„ë©”ì¸}Name)},
            STATUS = #{status},
            MODIFIED_DATE = NOW()
        WHERE {ë„ë©”ì¸_ëŒ€ë¬¸ì}_ID = #{({ë„ë©”ì¸}Id)}
    </update>

    <!-- {ë„ë©”ì¸} ì‚­ì œ -->
    <delete id="delete{ë„ë©”ì¸}" parameterType="com.skax.eatool.mbc.dc.{ë„ë©”ì¸_ì†Œë¬¸ì}dc.dto.{ë„ë©”ì¸}DDTO">
        DELETE FROM {ë„ë©”ì¸_ëŒ€ë¬¸ì}_INFO
        WHERE {ë„ë©”ì¸_ëŒ€ë¬¸ì}_ID = #{({ë„ë©”ì¸}Id)}
    </delete>

    <!-- {ë„ë©”ì¸} ì¡´ì¬ ì—¬ë¶€ í™•ì¸ -->
    <select id="existsBy{ë„ë©”ì¸}Id" resultType="boolean" parameterType="string">
        SELECT COUNT(1) > 0
        FROM {ë„ë©”ì¸_ëŒ€ë¬¸ì}_INFO
        WHERE {ë„ë©”ì¸_ëŒ€ë¬¸ì}_ID = #{({ë„ë©”ì¸}Id)}
    </select>

    <!-- {ë„ë©”ì¸} ê°œìˆ˜ ì¡°íšŒ -->
    <select id="countBySearchCondition" resultType="int" 
            parameterType="com.skax.eatool.mbc.dc.{ë„ë©”ì¸_ì†Œë¬¸ì}dc.dto.{ë„ë©”ì¸}DDTO">
        SELECT COUNT(1)
        FROM {ë„ë©”ì¸_ëŒ€ë¬¸ì}_INFO
        <where>
            <if test="{ë„ë©”ì¸}Id != null and {ë„ë©”ì¸}Id != ''">
                AND {ë„ë©”ì¸_ëŒ€ë¬¸ì}_ID = #{({ë„ë©”ì¸}Id)}
            </if>
            <if test="{ë„ë©”ì¸}Name != null and {ë„ë©”ì¸}Name != ''">
                AND {ë„ë©”ì¸_ëŒ€ë¬¸ì}_NAME LIKE CONCAT('%', #{({ë„ë©”ì¸}Name)}, '%')
            </if>
            <if test="status != null and status != ''">
                AND STATUS = #{status}
            </if>
        </where>
    </select>

</mapper>
```

### **ğŸš« NEVER DO - ë°ì´í„°ë² ì´ìŠ¤ ìœ„ë°˜ì‚¬í•­**

#### **1. ì˜ëª»ëœ íƒ€ì… ì‚¬ìš©**
```java
// âŒ ì˜ëª»ëœ ì˜ˆì‹œ
public class UserRepository {
    
    // Object íƒ€ì… ì‚¬ìš© (íƒ€ì… ì•ˆì „ì„± ì—†ìŒ)
    public Object getUser(Object userId) {
        return jdbcTemplate.queryForObject("SELECT * FROM users WHERE id = ?", userId);
    }
    
    // Map ì‚¬ìš© (íƒ€ì… ì•ˆì „ì„± ì—†ìŒ)
    public Map<String, Object> getUserMap(String userId) {
        return jdbcTemplate.queryForMap("SELECT * FROM users WHERE id = ?", userId);
    }
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ
public interface UserRepository {
    
    // íƒ€ì… ì•ˆì „í•œ ë©”ì„œë“œ
    User getUser(UserDDTO userDDTO) throws NewBusinessException;
    
    List<User> getListUser(UserDDTO userDDTO) throws NewBusinessException;
    
    int createUser(UserDDTO userDDTO) throws NewBusinessException;
}
```

#### **2. ì˜ëª»ëœ DTO êµ¬ì¡°**
```java
// âŒ ì˜ëª»ëœ ì˜ˆì‹œ
public class UserDDTO {
    
    // ëª¨ë“  í•„ë“œê°€ String (íƒ€ì… ì•ˆì „ì„± ì—†ìŒ)
    private String userId;
    private String userName;
    private String age; // ìˆ«ìì—¬ì•¼ í•¨
    private String isActive; // booleanì´ì–´ì•¼ í•¨
    private String createdDate; // Dateì—¬ì•¼ í•¨
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ
public class UserDDTO extends NewAbstractDTO {
    
    // ì ì ˆí•œ íƒ€ì… ì‚¬ìš©
    private String userId;
    private String userName;
    private Integer age;
    private Boolean isActive;
    private String createdDate;
    
    // íƒ€ì… ì•ˆì „í•œ ë©”ì„œë“œ
    public void setActiveStatus() {
        this.isActive = true;
    }
    
    public boolean isActive() {
        return Boolean.TRUE.equals(this.isActive);
    }
}
```

#### **3. ì˜ëª»ëœ SQL ë§¤í•‘**
```xml
<!-- âŒ ì˜ëª»ëœ ì˜ˆì‹œ -->
<select id="getUser" resultType="map">
    SELECT * FROM users WHERE id = #{id}
</select>

<!-- âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ -->
<select id="findByUserId" resultMap="UserResultMap" parameterType="string">
    SELECT 
        USER_ID,
        USER_NAME,
        EMAIL,
        STATUS,
        CREATED_DATE
    FROM USER_INFO
    WHERE USER_ID = #{userId}
</select>
```

### **ğŸ“‹ ë°ì´í„°ë² ì´ìŠ¤ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸**

#### **ìƒˆë¡œìš´ Repository ìƒì„± ì‹œ**
- [ ] Repository ì¸í„°í˜ì´ìŠ¤ ì •ì˜
- [ ] íƒ€ì… ì•ˆì „í•œ ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜
- [ ] ì˜ˆì™¸ ì²˜ë¦¬ ê·œì¹™ ì ìš©
- [ ] ë¡œê¹… êµ¬í˜„

#### **íƒ€ì… ì•ˆì „ì„± ê·œì¹™**
- [ ] Object íƒ€ì… ì‚¬ìš© ê¸ˆì§€
- [ ] ì ì ˆí•œ Java íƒ€ì… ì‚¬ìš©
- [ ] Enum ì‚¬ìš© (ìƒíƒœê°’)
- [ ] ê²€ì¦ ê·œì¹™ ì ìš©

#### **MyBatis ë§¤í•‘**
- [ ] ResultMap ì •ì˜
- [ ] íƒ€ì… ë³„ì¹­ ì„¤ì •
- [ ] ë™ì  ì¿¼ë¦¬ ì‚¬ìš©
- [ ] SQL ì¸ì ì…˜ ë°©ì§€

#### **Entity/DTO êµ¬ì¡°**
- [ ] íƒ€ì… ì•ˆì „í•œ í•„ë“œ ì •ì˜
- [ ] ê²€ì¦ ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©
- [ ] Getter/Setter êµ¬í˜„
- [ ] ìƒíƒœ ê´€ë¦¬ ë©”ì„œë“œ

### **ğŸ”§ íŠ¹ë³„í•œ ë°ì´í„°ë² ì´ìŠ¤ íŒ¨í„´**

#### **1. í˜ì´ì§• ì²˜ë¦¬**
```java
/**
 * í˜ì´ì§• ì²˜ë¦¬ Repository
 */
public interface PagingRepository<T> {
    
    /**
     * í˜ì´ì§• ì¡°íšŒ
     */
    Page<T> findByPage(Pageable pageable);
    
    /**
     * ì¡°ê±´ë¶€ í˜ì´ì§• ì¡°íšŒ
     */
    Page<T> findByConditionWithPage(SearchCondition condition, Pageable pageable);
}
```

#### **2. ë°°ì¹˜ ì²˜ë¦¬**
```java
/**
 * ë°°ì¹˜ ì²˜ë¦¬ Repository
 */
public interface BatchRepository<T> {
    
    /**
     * ë°°ì¹˜ ì‚½ì…
     */
    int batchInsert(List<T> entities);
    
    /**
     * ë°°ì¹˜ ìˆ˜ì •
     */
    int batchUpdate(List<T> entities);
    
    /**
     * ë°°ì¹˜ ì‚­ì œ
     */
    int batchDelete(List<String> ids);
}
```

#### **3. íŠ¸ëœì­ì…˜ ê´€ë¦¬**
```java
/**
 * íŠ¸ëœì­ì…˜ ê´€ë¦¬ Repository
 */
@Repository
@Transactional
public class TransactionalRepository {
    
    @Transactional(readOnly = true)
    public List<User> findUsers() {
        // ì½ê¸° ì „ìš© íŠ¸ëœì­ì…˜
    }
    
    @Transactional
    public void createUser(User user) {
        // ì“°ê¸° íŠ¸ëœì­ì…˜
    }
    
    @Transactional(rollbackFor = Exception.class)
    public void complexOperation() {
        // ë³µì¡í•œ íŠ¸ëœì­ì…˜
    }
}
```

### **âš ï¸ ì£¼ì˜ì‚¬í•­**

1. **íƒ€ì… ì•ˆì „ì„±**: Object íƒ€ì… ì‚¬ìš© ê¸ˆì§€, ì ì ˆí•œ Java íƒ€ì… ì‚¬ìš©
2. **SQL ì¸ì ì…˜ ë°©ì§€**: PreparedStatement ì‚¬ìš©, íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
3. **íŠ¸ëœì­ì…˜ ê´€ë¦¬**: ì ì ˆí•œ íŠ¸ëœì­ì…˜ ê²½ê³„ ì„¤ì •
4. **ì„±ëŠ¥ ìµœì í™”**: ì¸ë±ìŠ¤ í™œìš©, ì¿¼ë¦¬ ìµœì í™”
5. **ì—ëŸ¬ ì²˜ë¦¬**: ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬
6. **ë¡œê¹…**: ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì—ì„œ ìƒì„¸í•œ ë¡œê¹…

ì´ ê°€ì´ë“œë¥¼ ë”°ë¼ ë°ì´í„°ë² ì´ìŠ¤ ë ˆì´ì–´ë¥¼ êµ¬í˜„í•˜ë©´ íƒ€ì… ì•ˆì „í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸°